{% extends 'admin/layout.html' %} {% block content %}
<h4 class="mb-3">Tài khoản người chơi</h4>
<form class="mb-3" method="get">
    <div class="input-group">
        <input name="q" value="{{ q }}" class="form-control" placeholder="Tìm theo username hoặc ID tài khoản">
        <button class="btn btn-outline-light">Tìm</button>
    </div>
</form>
<div class="table-responsive">
    <table class="table table-dark table-striped align-middle">
        <thead>
            <tr>
                <th>ID</th>
                <th>Tài khoản</th>
                <th>Mã ID</th>
                <th>Số dư</th>
                <th>Thu nhập</th>
                <th>PNL</th>
                <th>Tỷ lệ user</th>
                <th></th>
                <th>Ngày tạo</th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr>
                <td>{{ u.id }}</td>
                <td>{{ u.username }}</td>
                <td>{{ u.account_id }}</td>
                <td>$ {{ '%.2f'|format(u.balance or 0) }}</td>
                <td>$ {{ '%.2f'|format(u.income or 0) }}</td>
                <td>$ {{ '%.2f'|format(u.pnl or 0) }}</td>
                <td>
                    <div class="small">1.98: {{ u.override_odds_primary if u.override_odds_primary is not none else '-' }} | 2.1: {{ u.override_odds_secondary if u.override_odds_secondary is not none else '-' }}</div>
                </td>
                <td style="min-width:260px;">
                    <form class="d-flex gap-2" method="post" action="{{ url_for('admin.user_odds', user_id=u.id) }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <input class="form-control form-control-sm" style="width:90px" name="override_odds_primary" placeholder="1.98" value="{{ u.override_odds_primary if u.override_odds_primary is not none }}">
                        <input class="form-control form-control-sm" style="width:90px" name="override_odds_secondary" placeholder="2.1" value="{{ u.override_odds_secondary if u.override_odds_secondary is not none }}">
                        <button class="btn btn-sm btn-primary">Lưu</button>
                        <button class="btn btn-sm btn-outline-warning" name="clear" value="1">Xóa</button>
                    </form>
                </td>
                <td>{{ u.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}